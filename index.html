<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <title>云南中考计算器</title>
        
        <!-- 新 Bootstrap4 核心 CSS 文件 -->
        <link rel="stylesheet" href="https://cdn.staticfile.net/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
        
        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="https://cdn.staticfile.net/jquery/3.2.1/jquery.min.js"></script>
        
        <!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
        <script src="https://cdn.staticfile.net/popper.js/1.15.0/umd/popper.min.js"></script>
        
        <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
        <script src="https://cdn.staticfile.net/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

        <style>
            #subj-exam{
                display: grid;
                grid-template-columns: auto auto auto;
            }

            .subject{
                border: 2px solid grey;
                border-radius: 2px;
                margin: 20px;
                padding: 15px;
            }
            
            #subjlist-free{
                width: 100%;
                margin: 10px;
                padding: 10px;
                border: 2px solid gray;

                display: grid;
                grid-template-columns: auto auto auto;
            }

            .subject-free{
                width: 100%;
            }
            .score-flex{
                width: 100%;
            }
            .score-extra,.score-per{
                margin: 0 2.5px;
                font-size: large;
            }
            .score-calc{
                color: orangered;
                font-size: xx-large;
                margin: 5px;
            }

            #score-result{
                margin: 20px;
            }
            #calc-result{
                color: red;
                font-size: xx-large;
            }

            @media screen and (max-width: 480px) {
                #subj-exam{
                    grid-template-columns: auto;
                }
            }
        </style>
    </head>
    <body>
        <div id="root" class="container">
            <div id="title" class="m-2">
                <h1 class="text-center">云南中考计算器</h1>
            </div>
            <div id="score-list" class="m-2">
                <div id="subj-exam">
                    <div class="subject">
                        <h2>语文</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*100%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>数学</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*100%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>英语</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*100%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>物理</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="90" class="flex-fill" />
                            <span class="score-extra">+10</span>
                            <span class="score-per">*50%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>化学</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="90" class="flex-fill" />
                            <span class="score-extra">+10</span>
                            <span class="score-per">*30%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>地理</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*30%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>生物</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="90" class="flex-fill" />
                            <span class="score-extra">+10</span>
                            <span class="score-per">*40%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>历史</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*40%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                    <div class="subject">
                        <h2>政治</h2>
                        <div class="d-inline-flex score-flex">
                            <input type="number" min="0" max="100" class="flex-fill" />
                            <span class="score-per">*40%</span>
                            <span class="score-calc"></span>
                        </div>
                    </div>
                </div>
                
                <div id="subjlist-free">
                    <h2>白送</h2>
                    <div class="subject-free">
                        <span>体育:</span>
                        <span class="score-calc">100</span>
                    </div>
                    <div class="subject-free">
                        <span>音乐:</span>
                        <span class="score-calc">20</span>
                    </div>
                    <div class="subject-free">
                        <span>美术:</span>
                        <span class="score-calc">20</span>
                    </div>
                    <div class="subject-free">
                        <span>劳动技术:</span>
                        <span class="score-calc">20</span>
                    </div>
                    <div class="subject-free">
                        <span>信息技术:</span>
                        <span class="score-calc">10</span>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <button id="calc-start" type="button" class="btn btn-lg btn-secondary">开始计算</button>
                </div>
            </div>
            
            <div id="score-result" class="text-center">
                <span>你的中考成绩为：</span>
                <span id="calc-result"></span>
                <small>（声明：仅供参考）</small>
            </div>
        </div>

        <script>
            $(document).ready(function(){
                $("#calc-start").click(function(){
                    for(i of $(".subject")){
                        var c = $(i).children(".score-flex");
                        var e = c.children(".score-extra");
                        var a = 0;
                        if(e.length){
                            a = parseInt(e.text().substr(0));
                        }
                        var v = c.children(".score-per").text();
                        var r = (c.children("input").val() + a) * parseInt(v.substring(1, v.length - 1)) / 100;
                        c.children(".score-calc").text(r);
                    }

                    var result = 0;
                    for(i of $(".score-calc")){
                        result += parseFloat($(i).text());
                    }
                    $("#calc-result").text(result);
                });
            });
        </script>
    </body>
</html>